<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>簡易版タイプ診断</title>
    <style>
        /* 簡易的なスタイル設定 */
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; background-color: #f0f2f5; }
        #app { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); width: 90%; max-width: 500px; text-align: center; }
        button { margin: 10px; padding: 10px 20px; font-size: 1rem; cursor: pointer; background-color: #007bff; color: white; border: none; border-radius: 5px; transition: background-color 0.3s; }
        button:hover { background-color: #0056b3; }
        .hidden { display: none; }
        #progress { margin-bottom: 20px; color: #666; }
    </style>
</head>
<body>

<div id="app">
    <div id="start-screen">
        <h1>サクサク性格診断</h1>
        <p>3問であなたのタイプを診断します。</p>
        <button onclick="startQuiz()">診断を始める</button>
    </div>

    <div id="quiz-screen" class="hidden">
        <div id="progress">質問 1 / 3</div>
        <h2 id="question-text">ここに質問が表示されます</h2>
        <div id="options">
            </div>
    </div>

    <div id="result-screen" class="hidden">
        <h2>診断結果</h2>
        <h1 id="result-type">タイプ名</h1>
        <p id="result-desc">説明文</p>
        <button onclick="location.reload()">もう一度やる</button>
    </div>
</div>

<script>
    // --- ここが診断の「頭脳」です ---

    // 1. 質問データ（本来はもっと増やします）
    // typeは、その回答を選んだ時に加点される軸（例: E=外向, I=内向, T=思考, F=感情）
    const questions = [
        {
            text: "休日はどちらかというと？",
            options: [
                { text: "外に出かけたい", type: "E", score: 1 },
                { text: "家でゆっくりしたい", type: "I", score: 1 }
            ]
        },
        {
            text: "判断をする時、重視するのは？",
            options: [
                { text: "論理や事実", type: "T", score: 1 },
                { text: "感情や調和", type: "F", score: 1 }
            ]
        },
        {
            text: "旅行の計画は？",
            options: [
                { text: "きっちり立てる", type: "J", score: 1 },
                { text: "行き当たりばったり", type: "P", score: 1 }
            ]
        }
    ];

    // 2. 結果データ（本来は16パターン用意します）
    const results = {
        "E-T-J": { title: "熱血リーダー型", desc: "外向的で論理的、計画的に物事を進めるタイプです。" },
        "I-F-P": { title: "夢見る芸術家型", desc: "内向的で感情豊か、柔軟な発想を持つタイプです。" },
        // 他の組み合わせも定義する必要がありますが、今回は簡易版なのでデフォルトを用意
        "default": { title: "バランス型", desc: "複数の要素を併せ持つ、柔軟なタイプです。" }
    };

    let currentQuestionIndex = 0;
    // スコアを記録する場所
    let scores = { E: 0, I: 0, T: 0, F: 0, J: 0, P: 0 };

    // 診断開始
    function startQuiz() {
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        showQuestion();
    }

    // 質問を表示
    function showQuestion() {
        const question = questions[currentQuestionIndex];
        document.getElementById('question-text').textContent = question.text;
        document.getElementById('progress').textContent = `質問 ${currentQuestionIndex + 1} / ${questions.length}`;
        
        const optionsDiv = document.getElementById('options');
        optionsDiv.innerHTML = ''; // 前の選択肢をクリア

        question.options.forEach(option => {
            const button = document.createElement('button');
            button.textContent = option.text;
            button.onclick = () => selectOption(option.type, option.score);
            optionsDiv.appendChild(button);
        });
    }

    // 選択肢を選んだ時の処理
    function selectOption(type, score) {
        // スコアを加算
        scores[type] += score;
        
        currentQuestionIndex++;
        if (currentQuestionIndex < questions.length) {
            showQuestion(); // 次の質問へ
        } else {
            showResult(); // 結果画面へ
        }
    }

    // 結果を表示
    function showResult() {
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');

        // 簡易的な判定ロジック（スコアが高い方を採用）
        const finalTypeStr = 
            (scores.E > scores.I ? "E" : "I") + "-" +
            (scores.T > scores.F ? "T" : "F") + "-" +
            (scores.J > scores.P ? "J" : "P");

        // 結果データを取得（定義されていない組み合わせはdefaultを表示）
        const resultData = results[finalTypeStr] || results["default"];

        document.getElementById('result-type').textContent = resultData.title;
        document.getElementById('result-desc').textContent = resultData.desc;
        
        // ここで console.log(scores) を見ると、実際の計算結果が確認できます
    }
</script>

</body>
</html>
